<overrides xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:noNamespaceSchemaLocation="config-overrides.xsd">
  <!-- an import can be used if many of the overrides are common between your different configurations -->
  <import file="/WEB-INF/config-overrides-geodata-props.xml" />


  <file name=".*/WEB-INF/config.xml">
    <!-- Use custom main page with geodata tab -->
    <replaceAtt xpath="services/service[@name='main.home']/output" attName="sheet" value="geodata/main-page.xsl" />


    <addXML xpath="services">
      <service name="main.search.suggest.contacts">
        <class name=".services.main.SearchSuggestion">
          <!-- Minimum frequency for a term value to be proposed in suggestion. -->
          <param name="threshold" value="1" />
          <!--
            Max number of term's values to look in the index. For large catalogue
            this value should be increased in order to get better results. If this
            value is too high, then looking for terms could take more times. The use
            of good analyzer should allow to reduce the number of useless values like
            (a, the, ...).
          -->
          <param name="max_number_of_terms" value="100000" />
          <!-- Default field to search in. any is full-text search field. -->
          <param name="default_search_field" value="organisationRole" />
        </class>

        <output sheet="geodata/search-suggestions-contacts.xsl" contentType="application/json; charset=UTF-8" />
      </service>
    </addXML>

    <!-- Set content type to csv and use custom xsl -->
    <replaceAtt xpath="services/service[@name='csv.present']/output" attName="contentType" value="text/x-csv; charset=UTF-8"  />
    <replaceAtt xpath="services/service[@name='csv.present']/output" attName="sheet" value="geodata/csv-search.xsl"  />

    <!-- Rename csv.search to export.csv. The service name is used for the file saved named. Adding the csv extension allows to be
          open by Excel or similar app by default -->
    <replaceAtt xpath="services/service[@name='csv.search']" attName="name" value="export.csv"  />

    <!-- Custom results xsl -->
    <replaceAtt xpath="services/service[@name='main.present.embedded']/output" attName="sheet" value="geodata/search-results-xhtml.xsl" />

  </file>
</overrides>